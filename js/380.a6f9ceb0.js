"use strict";(self["webpackChunkjoinbrants_test_assignment"]=self["webpackChunkjoinbrants_test_assignment"]||[]).push([[380],{586:function(e,t,a){a.d(t,{Z:function(){return d}});var o=a(3396);function i(e,t,a,i,r,s){return(0,o.wg)(),(0,o.iD)("button",{class:"button text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[(0,o.WI)(e.$slots,"default",{},void 0,!0)])}var r=(0,o.aZ)({name:"UiButton",methods:{onClick(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.$emit("click")}}}),s=a(89);const n=(0,s.Z)(r,[["render",i],["__scopeId","data-v-4a25d152"]]);var d=n},8968:function(e,t,a){a.d(t,{Z:function(){return p}});var o=a(3396),i=a(7139);const r=["for"],s={class:"header"},n={key:0,class:"required"},d=["id","value","type"];function l(e,t,a,l,u,h){return(0,o.wg)(),(0,o.iD)("div",{class:(0,i.C_)(["ui-input",{error:e.error}])},[(0,o._)("label",{for:e.guid},[(0,o._)("div",s,[(0,o.Uk)((0,i.zw)(e.label)+" ",1),e.required?((0,o.wg)(),(0,o.iD)("div",n," * ")):(0,o.kq)("",!0)]),(0,o._)("input",{class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",id:e.guid,value:e.modelValue,type:e.type,onPaste:t[0]||(t[0]=(...t)=>e.handleInput&&e.handleInput(...t)),onInput:t[1]||(t[1]=(...t)=>e.handleInput&&e.handleInput(...t))},null,40,d)],8,r)],2)}var u=a(4347),h=(0,o.aZ)({name:"UiInput",components:{},props:{label:String,type:{type:String,default:"text"},modelValue:[Number,String],required:Boolean,regex:String},emits:["update:modelValue"],data:()=>({error:!1,guid:(0,u.SF)()}),methods:{handleInput(e){null!==e.target&&(this.$emit("update:modelValue",e.target.value),this.error=!1)},onSave(){this.$formBus.emit("input:save",new Promise(((e,t)=>{this.error=!1,!this.required||void 0!==this.modelValue&&null!==this.modelValue||(this.error=!0,t(new Error(`${this.label} required`))),void 0!==this.modelValue&&this.regex&&this.regex.length&&!new RegExp(this.regex).test(this.modelValue.toString())&&(console.log(this.regex,!new RegExp(this.regex).test(this.modelValue.toString()),this.modelValue),this.error=!0,t(new Error(`error in ${this.label} field`))),e(!0)})))}},beforeUnmount(){this.$formBus.off("save",this.onSave.bind(this))},beforeMount(){this.$formBus.on("save",this.onSave.bind(this))}}),m=a(89);const c=(0,m.Z)(h,[["render",l],["__scopeId","data-v-2ac72702"]]);var p=c},8380:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var o=a(3396),i=a(7139);const r={class:"lost-password-container"},s={class:"body"},n={key:1},d={key:2};function l(e,t,a,l,u,h){const m=(0,o.up)("NoCodeNoEmail"),c=(0,o.up)("router-link"),p=(0,o.up)("UiInput"),g=(0,o.up)("UiButton");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",s,[e.showEnterEmail?((0,o.wg)(),(0,o.j4)(m,{key:0})):(0,o.kq)("",!0),e.hasEmail&&!e.hasCode?((0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(c,{to:`/lost-password?code=${e.codeRecieved}&email=${e.email}`},{default:(0,o.w5)((()=>[(0,o.Uk)(" /lost-password?code="+(0,i.zw)(e.codeRecieved)+"&email="+(0,i.zw)(e.email),1)])),_:1},8,["to"])])):(0,o.kq)("",!0),e.hasCode?((0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(p,{required:"",label:"new password",type:"password",regex:"(?=.*?[A-Z])(?=.*?[0-9])",modelValue:e.newPassword,"onUpdate:modelValue":t[0]||(t[0]=t=>e.newPassword=t)},null,8,["modelValue"]),(0,o.Wm)(g,{onClick:e.updatePassword},{default:(0,o.w5)((()=>[(0,o.Uk)(" Update password ")])),_:1},8,["onClick"])])):(0,o.kq)("",!0)])])}a(7658);function u(e,t,a,i,r,s){const n=(0,o.up)("UiInput"),d=(0,o.up)("UiButton");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(n,{required:"",label:"email",modelValue:e.enterEmail,"onUpdate:modelValue":t[0]||(t[0]=t=>e.enterEmail=t)},null,8,["modelValue"]),(0,o.Wm)(d,{onClick:e.resetPassword},{default:(0,o.w5)((()=>[(0,o.Uk)("Restore password")])),_:1},8,["onClick"])])}var h=a(8968),m=a(586),c=a(1597),p=(0,o.aZ)({name:"NoCodeNoEmail",components:{UiInput:h.Z,UiButton:m.Z},data(){return{enterEmail:""}},methods:{async resetPassword(){const e=await c.Z.resetPassword({email:this.enterEmail});e.data.userInfo&&e.data.userInfo.email&&this.$router.push({path:"/lost-password",query:{email:e.data.userInfo.email}})}}}),g=a(89);const w=(0,g.Z)(p,[["render",u]]);var v=w,f=a(3764),b=(0,o.aZ)({name:"SignUp",components:{UiInput:h.Z,UiButton:m.Z,NoCodeNoEmail:v},props:{email:String,code:String},data:()=>({enterEmail:"",codeRecieved:"",newPassword:"",validationArray:new Array,validating:!1}),computed:{hasEmail(){return this.email&&this.email.length},showEnterEmail(){return void 0===this.code&&void 0===this.email},hasCode(){return this.code&&this.code.length}},watch:{hasEmail(e){e&&!this.hasCode&&this.populateCode()}},methods:{async wait(){return new Promise((e=>{setTimeout((()=>{e(!0)}),250)}))},async validate(){this.validating=!0,this.$formBus.on("input:save",this.handleSaveEvent.bind(this)),this.$formBus.emit("save"),this.wait(),this.$formBus.off("input:save",this.handleSaveEvent.bind(this));try{await Promise.all(this.validationArray)}catch(e){return console.error(e),!1}return!0},handleSaveEvent(e){this.validationArray.push(e)},async updatePassword(){const e=await this.validate();if(e){const e=await f.Z.changePasswordWithCode({newPassword:this.newPassword,code:this.code,email:this.email});e.result&&this.$router.push({name:"Profile"})}},async populateCode(){const e=await c.Z.getCode({email:this.email});e.data.code&&(this.codeRecieved=e.data.code)}},mounted(){this.hasEmail&&!this.hasCode&&this.populateCode()}});const k=(0,g.Z)(b,[["render",l],["__scopeId","data-v-b2233d34"]]);var y=k}}]);
//# sourceMappingURL=380.a6f9ceb0.js.map