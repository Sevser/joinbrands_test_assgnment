"use strict";(self["webpackChunkjoinbrants_test_assignment"]=self["webpackChunkjoinbrants_test_assignment"]||[]).push([[436],{586:function(e,t,o){o.d(t,{Z:function(){return d}});var a=o(3396);function r(e,t,o,r,i,s){return(0,a.wg)(),(0,a.iD)("button",{class:"button text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[(0,a.WI)(e.$slots,"default",{},void 0,!0)])}var i=(0,a.aZ)({name:"UiButton",methods:{onClick(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.$emit("click")}}}),s=o(89);const n=(0,s.Z)(i,[["render",r],["__scopeId","data-v-4a25d152"]]);var d=n},5343:function(e,t,o){o.d(t,{Z:function(){return p}});var a=o(3396),r=o(7139);const i=["for"],s={class:"header"},n={key:0,class:"required"},d=["id","value","type"];function l(e,t,o,l,u,m){return(0,a.wg)(),(0,a.iD)("div",{class:(0,r.C_)(["ui-input",{error:e.error}])},[(0,a._)("label",{for:e.guid},[(0,a._)("div",s,[(0,a.Uk)((0,r.zw)(e.label)+" ",1),e.required?((0,a.wg)(),(0,a.iD)("div",n," * ")):(0,a.kq)("",!0)]),(0,a._)("input",{class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",id:e.guid,value:e.modelValue,type:e.type,onPaste:t[0]||(t[0]=(...t)=>e.handleInput&&e.handleInput(...t)),onInput:t[1]||(t[1]=(...t)=>e.handleInput&&e.handleInput(...t))},null,40,d)],8,i)],2)}var u=o(4347),m=(0,a.aZ)({inject:["formId"],name:"UiInput",components:{},props:{label:String,type:{type:String,default:"text"},modelValue:[Number,String],required:Boolean,regex:String},emits:["update:modelValue"],data:()=>({error:!1,guid:(0,u.SF)()}),methods:{handleInput(e){null!==e.target&&(this.$emit("update:modelValue",e.target.value),this.error=!1)},onSave(){this.$formBus.emit(`${this.formId}input:save`,new Promise(((e,t)=>{this.error=!1,!this.required||void 0!==this.modelValue&&null!==this.modelValue||(this.error=!0,t(new Error(`${this.label} required`))),void 0!==this.modelValue&&this.regex&&this.regex.length&&!new RegExp(this.regex).test(this.modelValue.toString())&&(console.log(this.regex,!new RegExp(this.regex).test(this.modelValue.toString()),this.modelValue),this.error=!0,t(new Error(`error in ${this.label} field`))),e(!0)})))}},beforeUnmount(){this.$formBus.off(`${this.formId}save`,this.onSave.bind(this))},beforeMount(){this.$formBus.on(`${this.formId}save`,this.onSave.bind(this))},mounted(){console.log(this.formId)},setup(){const e=(0,a.f3)("formId");return{formId:e}}}),h=o(89);const c=(0,h.Z)(m,[["render",l],["__scopeId","data-v-fb4ef724"]]);var p=c},436:function(e,t,o){o.r(t),o.d(t,{default:function(){return y}});var a=o(3396),r=o(7139);const i={class:"lost-password-container"},s={class:"body"},n={key:1},d={key:2};function l(e,t,o,l,u,m){const h=(0,a.up)("NoCodeNoEmail"),c=(0,a.up)("router-link"),p=(0,a.up)("UiInput"),f=(0,a.up)("UiButton");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",s,[e.showEnterEmail?((0,a.wg)(),(0,a.j4)(h,{key:0})):(0,a.kq)("",!0),e.hasEmail&&!e.hasCode?((0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(c,{to:`/lost-password?code=${e.codeRecieved}&email=${e.email}`},{default:(0,a.w5)((()=>[(0,a.Uk)(" /lost-password?code="+(0,r.zw)(e.codeRecieved)+"&email="+(0,r.zw)(e.email),1)])),_:1},8,["to"])])):(0,a.kq)("",!0),e.hasCode?((0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(p,{required:"",label:"new password",type:"password",regex:"(?=.*?[A-Z])(?=.*?[0-9])",modelValue:e.newPassword,"onUpdate:modelValue":t[0]||(t[0]=t=>e.newPassword=t)},null,8,["modelValue"]),(0,a.Wm)(f,{onClick:e.updatePassword},{default:(0,a.w5)((()=>[(0,a.Uk)(" Update password ")])),_:1},8,["onClick"])])):(0,a.kq)("",!0)])])}o(7658);function u(e,t,o,r,i,s){const n=(0,a.up)("UiInput"),d=(0,a.up)("UiButton");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{required:"",label:"email",modelValue:e.enterEmail,"onUpdate:modelValue":t[0]||(t[0]=t=>e.enterEmail=t)},null,8,["modelValue"]),(0,a.Wm)(d,{onClick:e.resetPassword},{default:(0,a.w5)((()=>[(0,a.Uk)("Restore password")])),_:1},8,["onClick"])])}var m=o(5343),h=o(586),c=o(1597),p=o(4347),f=(0,a.aZ)({name:"NoCodeNoEmail",provide(){return{formId:this.formId}},components:{UiInput:m.Z,UiButton:h.Z},data(){return{enterEmail:"",formId:(0,p.SF)()}},methods:{async resetPassword(){const e=await c.Z.resetPassword({email:this.enterEmail});e.data.userInfo&&e.data.userInfo.email&&this.$router.push({path:"/lost-password",query:{email:e.data.userInfo.email}})}}}),g=o(89);const v=(0,g.Z)(f,[["render",u]]);var w=v,b=o(3764),k=(0,a.aZ)({name:"SignUp",provide(){return{formId:this.formId}},components:{UiInput:m.Z,UiButton:h.Z,NoCodeNoEmail:w},props:{email:String,code:String},data:()=>({enterEmail:"",codeRecieved:"",newPassword:"",validationArray:new Array,validating:!1,formId:(0,p.SF)()}),computed:{hasEmail(){return this.email&&this.email.length},showEnterEmail(){return void 0===this.code&&void 0===this.email},hasCode(){return this.code&&this.code.length}},watch:{hasEmail(e){e&&!this.hasCode&&this.populateCode()}},methods:{async wait(){return new Promise((e=>{setTimeout((()=>{e(!0)}),250)}))},async validate(){this.validating=!0,this.$formBus.on("input:save",this.handleSaveEvent.bind(this)),this.$formBus.emit("save"),this.wait(),this.$formBus.off("input:save",this.handleSaveEvent.bind(this));try{await Promise.all(this.validationArray)}catch(e){return console.error(e),!1}return!0},handleSaveEvent(e){this.validationArray.push(e)},async updatePassword(){const e=await this.validate();if(e){const e=await b.Z.changePasswordWithCode({newPassword:this.newPassword,code:this.code,email:this.email});e.result&&this.$router.push({name:"Profile"})}},async populateCode(){const e=await c.Z.getCode({email:this.email});e.data.code&&(this.codeRecieved=e.data.code)}},mounted(){this.hasEmail&&!this.hasCode&&this.populateCode()}});const I=(0,g.Z)(k,[["render",l],["__scopeId","data-v-621c4bd2"]]);var y=I}}]);
//# sourceMappingURL=436.96eeff67.js.map